import { setToken } from './auth'
export class TwinBridge{ start(){ if(window.parent!==window){ window.parent.postMessage({type:'TwinBridge:hello'},'*'); window.addEventListener('message',ev=>{ const m=ev.data||{}; if(m.type==='TwinBridge:config'){ const p=m.payload||{}; if(p.token) setToken(p.token); if(p.apiKey) localStorage.setItem('agent_api_key',p.apiKey); if(p.namespace) localStorage.setItem('agent_ns',p.namespace) } }) } } }
export class GenesisBridge{ start(){ if(window.parent!==window){ window.parent.postMessage({type:'GenesisBridge:hello'},'*'); window.addEventListener('message',ev=>{ const m=ev.data||{}; if(m.type==='GenesisBridge:config'){ const p=m.payload||{}; if(p.token) setToken(p.token); if(p.apiKey) localStorage.setItem('agent_api_key',p.apiKey); if(p.namespace) localStorage.setItem('agent_ns',p.namespace) } }) } } }